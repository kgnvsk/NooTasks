# requirements.md

## Telegram-–±–æ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω—á–µ—Å–∫–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –¥–ª—è ClickUp (MVP v1)

## 1. –¶–µ–ª—å
–û–±–µ—Å–ø–µ—á–∏—Ç—å —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è –±—ã—Å—Ç—Ä—ã–º–∏, –∫—Ä–∞—Ç–∫–∏–º–∏ –∏ —Ç–æ—á–Ω—ã–º–∏ –æ—Ç—á–µ—Ç–∞–º–∏ –ø–æ –∑–∞–¥–∞—á–∞–º ClickUp —á–µ—Ä–µ–∑ Telegram-–±–æ—Ç–∞ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞—Ö–æ–¥–∏—Ç—å –≤ CRM.

## 2. –û–±–ª–∞—Å—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
- ClickUp –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ TaskTracker.
- –ö–æ–º–ø–∞–Ω–∏—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ –æ—Ç–¥–µ–ª—ã (marketing, hr, sales –∏ —Ç.–¥.).
- –ö–∞–∂–¥—ã–π –æ—Ç–¥–µ–ª —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –Ω–∞–±–æ—Ä—É ClickUp List ID –∏–ª–∏ Space ID.
- –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –±–æ—Ç–æ–º –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ Telegram inline-–∫–Ω–æ–ø–∫–∏.

## 3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ (MVP)
1. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –Ω–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç.
2. –£–∑–Ω–∞—Ç—å, –∫—Ç–æ —Å–µ–≥–æ–¥–Ω—è –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª —Å–≤–æ–∏ –∑–∞–¥–∞—á–∏.
3. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª–∏—Å—å –±–æ–ª–µ–µ N –¥–Ω–µ–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 7).
4. –ü–æ–ª—É—á–∏—Ç—å –æ—Ç—á–µ—Ç—ã:
   - –ø–æ –≤—Å–µ–º –æ—Ç–¥–µ–ª–∞–º
   - –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –æ—Ç–¥–µ–ª—É

## 4. –ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –¢–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ ClickUp API.
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ ‚â§ 5 —Å–µ–∫—É–Ω–¥ –ø—Ä–∏ –æ–±—ä–µ–º–µ –¥–æ 2000 –∑–∞–¥–∞—á.
- –ú–∏–Ω–∏–º—É–º —Ç–µ–∫—Å—Ç–∞, –º–∞–∫—Å–∏–º—É–º —É–ø—Ä–∞–≤–ª–µ–Ω—á–µ—Å–∫–æ–π –ø–æ–ª—å–∑—ã.
- –¢–∞–π–º–∑–æ–Ω–∞ —Å—Ç—Ä–æ–≥–æ Europe/Lisbon.
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω—ã–π ClickUp API v2 (2025).

## 5. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û–±—â–∞—è —Å—Ö–µ–º–∞
Telegram Bot ‚Üí Report Service ‚Üí ClickUp API

### –ú–æ–¥—É–ª–∏
- bot/ ‚Äî Telegram –ª–æ–≥–∏–∫–∞, –º–µ–Ω—é, callbacks
- clickup/ ‚Äî HTTP-–∫–ª–∏–µ–Ω—Ç ClickUp, –ø–∞–≥–∏–Ω–∞—Ü–∏—è, retry
- reports/ ‚Äî –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –æ—Ç—á–µ—Ç–æ–≤
- utils/ ‚Äî —Ä–∞–±–æ—Ç–∞ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞
- config/ ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ—Ç–¥–µ–ª–æ–≤
- storage/ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî –∫—ç—à –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## 6. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- Node.js 20+
- TypeScript
- Telegraf
- Axios
- Luxon
- Zod
- Jest –∏–ª–∏ Vitest (–º–∏–Ω–∏–º–∞–ª—å–Ω–æ)

## 7. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- TELEGRAM_BOT_TOKEN
- CLICKUP_API_TOKEN
- CLICKUP_TEAM_ID
- TIMEZONE=Europe/Lisbon
- ADMIN_TELEGRAM_IDS=comma,separated,ids

### departments.json
```json
{
  "marketing": { "list_ids": ["12345", "67890"] },
  "hr": { "list_ids": ["22222"] },
  "sales": { "list_ids": ["33333", "44444"] }
}
```

## 8. –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ ClickUp

–î–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏:
- id
- name
- url
- status.status
- assignees[].id
- assignees[].username
- due_date (timestamp ms)
- date_updated (timestamp ms)
- priority.priority

## 9. –õ–æ–≥–∏–∫–∞ –æ—Ç—á–µ—Ç–æ–≤

### 9.1 –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
–£—Å–ª–æ–≤–∏—è:
- due_date < now
- —Å—Ç–∞—Ç—É—Å –Ω–µ Done –∏ –Ω–µ Closed

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
- —Ç–æ–ø-5 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É
- –¥–æ 10 –∑–∞–¥–∞—á —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é pagination

### 9.2 –ö—Ç–æ —Å–µ–≥–æ–¥–Ω—è –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª –∑–∞–¥–∞—á–∏
–£—Å–ª–æ–≤–∏—è:
- due_date ‚àà [startOfToday, endOfToday]
- date_updated < startOfToday

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- —Å–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á
- –¥–æ 5 –∑–∞–¥–∞—á –Ω–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

### 9.3 –ó–∞–≤–∏—Å—à–∏–µ –∑–∞–¥–∞—á–∏ (N –¥–Ω–µ–π)
–£—Å–ª–æ–≤–∏—è:
- date_updated < now ‚àí N –¥–Ω–µ–π
- —Å—Ç–∞—Ç—É—Å –Ω–µ Done –∏ –Ω–µ Closed

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- —Ç–æ–ø-10 –∑–∞–¥–∞—á
- —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞–≤–Ω–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## 10. Telegram UX

### –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- üìå –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
- üí§ –ö—Ç–æ —Å–µ–≥–æ–¥–Ω—è –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª
- üïí –ó–∞–≤–∏—Å—à–∏–µ 7 –¥–Ω–µ–π
- üóÇ –í—ã–±–æ—Ä –æ—Ç–¥–µ–ª–∞

### Inline –∫–Ω–æ–ø–∫–∏
- –ù–∞–∑–∞–¥
- –û–±–Ω–æ–≤–∏—Ç—å
- –ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ

### –§–æ—Ä–º–∞—Ç –∑–∞–¥–∞—á–∏
```
‚Ä¢ [Marketing] In Progress
  Task name
  üë§ Alex | due: 29.12 | upd: 27.12
  üîó link
```

## 11. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è: 100 –∑–∞–¥–∞—á –Ω–∞ –∑–∞–ø—Ä–æ—Å
- –ú–∞–∫—Å–∏–º—É–º –∑–∞–¥–∞—á –∑–∞ –æ—Ç—á–µ—Ç: 2000
- Retry —Å exponential backoff –Ω–∞ 429 –∏ 5xx
- HTTP timeout: 15 —Å–µ–∫—É–Ω–¥
- –ö—ç—à –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ClickUp: 1 —á–∞—Å

## 12. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è ADMIN_TELEGRAM_IDS
- –í—Å–µ —Ç–æ–∫–µ–Ω—ã —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ env
- –ù–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## 13. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è MVP
- "–ù–µ –º–µ–Ω—è–ª —Å—Ç–∞—Ç—É—Å" —Ç—Ä–∞–∫—Ç—É–µ—Ç—Å—è –∫–∞–∫ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (date_updated)
- –ò—Å—Ç–æ—Ä–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ ClickUp –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- –ì–æ–ª–æ—Å–æ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤–Ω–µ —Ä–∞–º–æ–∫ MVP

## 14. Definition of Done
- –ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫–∏
- –í—Å–µ –æ—Ç—á–µ—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç –º–∏–Ω–∏–º—É–º –¥–ª—è –æ–¥–Ω–æ–≥–æ –æ—Ç–¥–µ–ª–∞
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ç–∞–π–º–∑–æ–Ω–æ–π
- –ü—Ä–æ–µ–∫—Ç –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- README —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç

